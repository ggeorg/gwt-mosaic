#sidebar TableOfContents

A [Timer] is a feature that counts how many frames happen while it's active, and after a certain number of frames has gone by, it triggers a command.

Example:

<wiki:gadget url="http://mosaic.arkasoft.com/gwt-mosaic-timer-wiki.xml?v=1" height="256" width="512" border="0"/>

Code:

{{{
import java.util.Date;

import org.gwt.mosaic2g.binding.client.Getter;
import org.gwt.mosaic2g.client.animator.AnimationClient;
import org.gwt.mosaic2g.client.animator.AnimationEngine;
import org.gwt.mosaic2g.client.scene.GrinFile;
import org.gwt.mosaic2g.client.scene.InterpolatedModelParser;
import org.gwt.mosaic2g.client.scene.Scene;
import org.gwt.mosaic2g.client.scene.Segment;
import org.gwt.mosaic2g.client.scene.Show;
import org.gwt.mosaic2g.client.scene.Timer;
import org.gwt.mosaic2g.client.scene.control.Text;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.i18n.client.DateTimeFormat;
import com.google.gwt.i18n.client.DateTimeFormat.PredefinedFormat;
import com.google.gwt.user.client.Command;
import com.google.gwt.user.client.ui.RootLayoutPanel;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class Showcase implements EntryPoint {
	private final Scene scene = new Scene();

	/**
	 * This is the entry point method.
	 */
	public void onModuleLoad() {
		// Specify a GWT panel (here RootLayoutPanel) to render our scene graph.
		// Within the panel we add the scene. A scene is a top level area where
		// you can set the root node of a scene graph, which is always a show
		// node.
		RootLayoutPanel.get().add(scene);
		scene.setShow(createShow());

		// Create an AnimationEngine instance with all AnimationClient(s) it has
		// to manage (Scene implements the AnimationClient interface).
		final AnimationEngine animationEngine = new AnimationEngine(
				new AnimationClient[] { scene });
		// Start the animation engine.
		animationEngine.start();
	}

	private Text text;

	private Show createShow() {
		Show show = new Show();

		final DateTimeFormat formatter = DateTimeFormat
				.getFormat(PredefinedFormat.TIME_FULL);

		text = new Text(show, scene.getClientWidth().createBinding(
				new Getter<Integer>() {
					@Override
					public Integer get(Integer value) {
						return (value - text.getPrefWidth().$()) / 2;
					}
				}), scene.getClientHeight().createBinding(
				new Getter<Integer>() {
					@Override
					public Integer get(Integer value) {
						return (value - text.getPrefHeight().$()) / 2;
					}
				}));
		text.getText().$(formatter.format(new Date()));
		text.setStyleName("timeDisplay");

		Timer timer = new Timer(show, 25, new Command() {
			@Override
			public void execute() {
				text.getText().$(formatter.format(new Date()));
			}
		});

		Segment s = new Segment(show);
		s.add(timer);
		s.add(text);

		show.activateSegment(s);

		return show;
	}

	@GrinFile(value = "translator_model.txt")
	interface MyTranslatorModel extends InterpolatedModelParser {
		MyTranslatorModel INSTANCE = GWT.create(MyTranslatorModel.class);
	};

}
}}}

CSS:

{{{
.timeDisplay {
    font-family: Arial,Helvetica,Verdana,sans-serif;
    font-size: 32px;
    font-weight: bold;
    font-style: normal;
    text-shadow: 0px 0px 5px #5816dc, 0 0 0.1em black, 0 0 0.1em black;	
}
}}}